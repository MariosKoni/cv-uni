doctype html
html(lang='en', dir='ltr')
  head
    meta(charset='utf-8')
    title Home
    link(rel='stylesheet', type='text/css', href='semantic/dist/semantic.min.css')
    link(rel='stylesheet', type='text/css', href='style.css')
    script(src='https://code.jquery.com/jquery-3.1.1.min.js', integrity='sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=', crossorigin='anonymous')
    script(src='semantic/dist/semantic.min.js')
    script(type='text/javascript', src='node_modules/semantic-ui-calendar/dist/calendar.min.js')
    link(rel='stylesheet', href='node_modules/semantic-ui-calendar/dist/calendar.min.css')
  body
    .ui.container.index
      .ui.pointing.menu
        ul
          li
            b +
            a(href='form.html')
              i Upload your CV
      .mainButton
        .ui.massive.buttons.home
          button.ui.button(type='button', name='sortByStudents' onclick="sortByStudents()") Students
          .or
          button.ui.positive.button(type='button', name='sortByProfessors' onclick="sortByProfessors()") Professors
      .mainSearch
        .ui.huge.search
          .ui.icon.input
              input.prompt(type='text', id="fname", onkeyup="search()", placeholder="Search by person's name, skills, status...")
              i.search.icon
          .results
      .ui.hidden.divider
      
      - var count=0;
      each n in message
        table(id="myTable", style='width:100%', border='1')
          form(name='CVPicker' action='/dynamic' method='post' target="_blank")
            tr          
              th
                .item
                  .content
                  if n.academicStatus.includes("student") 
                    img.ui.tiny.avatar.image(src='pics/student.png', align="center")
                  else
                    img.ui.tiny.avatar.image(src='pics/professor.png', align="center")
                  label(style="font-size:75%")= n.firstName
                  input(type="hidden" name="firstName" value=n.firstName)
                  label(style="font-size:75%")= n.lastName
                  label#status(style="font-size:75%")= n.academicStatus
                  input(type="hidden" name="lastName" value=n.lastName)
                  - count = count + 1;
                  input(type='submit' value='View CV') 
        script(type='text/javascript').
          
          //This function is triggered when the students button is clicked
          //and sorts the list so only studens are visible
          function sortByStudents() {
            table = document.getElementById("myTable");
            tr = document.getElementsByTagName("tr");
            
            for (var i = 0; i < tr.length; ++i) {
              th = tr[i].getElementsByTagName("th")[0];
              txtValue = th.textContent || th.innerText;
              if (txtValue.includes("professor"))
                tr[i].style.display = "none";
            }
          }
          
          //This function is triggered when the professors button is clicked
          //and sorts the list so only professors are visible
          function sortByProfessors() {
            table = document.getElementById("myTable");
            tr = document.getElementsByTagName("tr");
            
            for (var i = 0; i < tr.length; ++i) {
              th = tr[i].getElementsByTagName("th")[0];
              txtValue = th.textContent || th.innerText;
              if (txtValue.includes("student"))
                tr[i].style.display = "none";
            }
          }
          
          function search() {
            // Declare variables
            var input, filter, table, tr, th, i, txtValue;
            input = document.getElementById("fname");
            table = document.getElementById("myTable");
            tr = document.getElementsByTagName("tr");
            filter = input.value.toUpperCase();
            
            for (i= 0; i < tr.length;i++) {
              th = tr[i].getElementsByTagName("th")[0];
              if(th) {
                
                txtValue = th.textContent || th.innerText;
                if(txtValue.toUpperCase().indexOf(filter) > -1) {
                  tr[i].style.display = "";
                } else {
                  
                  tr[i].style.display = "none";
                }
              }
            }
          }
